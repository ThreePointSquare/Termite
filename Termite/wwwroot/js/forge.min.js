function showModel(n){var t={env:"AutodeskProduction",getAccessToken:getAccessToken,refreshToken:getAccessToken},i="urn:"+n;Autodesk.Viewing.Initializer(t,function(){viewerApp=new Autodesk.Viewing.ViewingApplication("MyViewerDiv");viewerApp.registerViewer(viewerApp.k3D,Autodesk.Viewing.Private.GuiViewer3D,{extensions:["ForgeViewerExtension"]});viewerApp.loadDocument(i,onDocumentLoadSuccess,onDocumentLoadFailure)})}function onDocumentLoadSuccess(n){var t=viewerApp.bubble.search({type:"geometry"});if(t.length===0){console.error("Document contains no viewables.");return}document=n;viewerApp.selectItem(t[0].data,onItemLoadSuccess,onItemLoadFail)}function onDocumentLoadFailure(n){console.error("onDocumentLoadFailure() - errorCode:"+n)}function onItemLoadSuccess(n,t){console.log("onItemLoadSuccess()!");console.log(n);console.log(t);console.log("Viewers are equal: "+(n===viewerApp.getCurrentViewer()));model=n.model}function onItemLoadFail(n){console.error("onItemLoadFail() - errorCode:"+n)}function getAccessToken(){var n=null;return n=new XMLHttpRequest,n.open("GET","/api/forge/token",!1),n.send(null),n.responseText}function ForgeViewerExtension(n,t){Autodesk.Viewing.Extension.call(this,n,t)}function getPropertiesSuccess(n){for(var u=document.getElementById("MyPropertiesSelected"),i=n.properties,r='<table class="table">',t=0;t<i.length;t++)r+="<tr><td>"+i[t].displayName+"<\/td><td>"+i[t].displayValue+"<\/td><\/tr>";r+="<\/table>";u.innerHTML=r}function getPropertiesFailure(){var n=document.getElementById("MyPropertiesSelected");n.innerText="failure"}function createSection(){}function removeSections(n){n.setCutPlanes(null)}var viewerApp,model;ForgeViewerExtension.prototype=Object.create(Autodesk.Viewing.Extension.prototype);ForgeViewerExtension.prototype.constructor=ForgeViewerExtension;ForgeViewerExtension.prototype.onSelectionEvent=function(){var n=this.viewer.getSelection(),t=document.getElementById("MySelectionValue"),i;t.innerText=n.length;i=model.getProperties(n[0],getPropertiesSuccess,getPropertiesFailure)};ForgeViewerExtension.prototype.load=function(){var n=this.viewer,t,i,r;return this.onSelectionBinded=this.onSelectionEvent.bind(this),this.viewer.addEventListener(Autodesk.Viewing.SELECTION_CHANGED_EVENT,this.onSelectionBinded),t=document.getElementById("MyAwesomeLockButton"),t.addEventListener("change",function(){t.checked?n.setNavigationLock(!0):n.setNavigationLock(!1)}),i=document.getElementById("MySectionView"),i.addEventListener("click",function(){document.getElementById("MyViewerDiv").onclick=function(t){var i=n.clientToWorld(t.clientX,t.clientY,!0);if(i!=null){var r=i.face.normal,u=i.intersectPoint,f=r.x,e=r.y,o=r.z,s=u.x,h=u.y,c=u.z,l=-f*s-e*h-o*c,a=[new THREE.Vector4(f,e,o,l)];n.setCutPlanes(a)}document.getElementById("MyViewerDiv").onclick=null}}),r=document.getElementById("removeSectionBtn"),r.addEventListener("click",function(){removeSections(n)}),!0};ForgeViewerExtension.prototype.unload=function(){return alert("ForgeViewerExtension is now unloaded!"),this.viewer.removeEventListener(Autodesk.Viewing.SELECTION_CHANGED_EVENT,this.onSelectionBinded),this.onSelectionBinded=null,!0};Autodesk.Viewing.theExtensionManager.registerExtension("ForgeViewerExtension",ForgeViewerExtension);